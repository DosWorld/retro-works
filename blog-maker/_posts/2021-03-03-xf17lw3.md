-----
title: 论数据流图在系统分析与设计中的应用
tags: [软考,系统分析师]
-----

【摘要】
-------

本人所在项目组接到开发文件管理器的任务，主要用于根据用户选择的文件类别、日期、所属机构等条件筛选出符合条件的文件并显示成文件列表，且支持用户自己选择多个文件类别、日期、所属机构，然后将这些搜索条件保存成用户自定义专题，供用户日后快速查询对应查询条件的文件。本人主要负责领导团队进行前端开发工作。系统交互逻辑较为复杂，需要在浏览器端处理大量的联动操作，以保证多个相关的地方显示内容的一致性，且后端各个初始化接口返回的数据格式不统一，需要做大量的转换操作。针对这些问题，本人在系统分析阶段通过使用数据流图的方式，将复杂的联动处理过程和数据处理过程清晰地展现出来，然后在系统设计阶段根据数据流图设计系统架构，使得设计出的系统架构易于理解和维护，成功缩短了开发时间，减少了开发成本，提高了开发质量。

【正文】
-------

本人所在项目组接到开发文件管理器的任务，主要用于根据用户选择的文件类别、日期、所属机构等查询条件，筛选出符合条件的文件并以列表的形式展示在页面上，且支持用户自己选择多个文件类别、日期、所属机构，然后将这些搜索条件保存成用户自定义专题，供用户日后快速查询对应查询条件的文件。前端主要使用的技术有vue.js、element-ui，后端主要使用的技术有JAVA、SpringBoot、PostgreSQL。

本人在该项目中负责领导前端团队进行相关开发工作，设计系统的前端整体架构，并负责与后端团队沟通。

数据流图包含以下要素：

* 数据流：用来指明数据的流向，可附加文字说明该数据流包含哪些类型的数据，以及相关数据的用途等。
* 数据处理节点：用来接收输入的数据，然后产生相应的输出。可附加文字说明对输入数据的处理方式，以及输出数据相关的信息。
* 数据存储节点：用来存储数据，数据处理节点可从中取出数据。
* 外部实体：通常是数据源或数据终点，部分情况下此类节点可兼有数据源和数据终点两种角色。

逻辑DFD通常对应系统分析阶段绘制的数据流图，抽象程度较高，通常与目标环境无关。物理DFD则通常是逻辑DFD在目标环境中的具体实现。

在需求分析阶段，本人发现了系统有以下特点：
* 页面中的交互逻辑较为复杂，需要处理大量的联动操作，以保证多个相关地方显示内容的一致性。
* 因后台性能优化等因素限制，获取文件类别、所属机构等查询条件可选项的接口返回的数据格式不一致，需要在浏览器端进行转换后方可使用。
* 系统需要处理和其它系统的交互，包括从URL中获取数据，生成正确的URL以供其它系统使用等。

在系统分析阶段，为了增强系统的可变性、可维护性，减少开发和测试成本，减少工期延误和出现质量问题的风险，本人使用了数据流图来分析系统的数据处理逻辑和用户交互逻辑。

首先是准备数据流图中用到的节点：
* 数据处理节点：用于表示数据处理相关的逻辑，包括处理后台接口返回的 初始化数据的逻辑，用户从可选的查询条件中选出要使用的查询条件的逻辑，根据用户选择的查询条件汇总成最终的查询报文的逻辑，处理后台接口返回的文件列表的逻辑。
* 数据存储节点：用于表示浏览器端需要存储的数据，包括文件类别、所属机构、日期等查询条件的可选项，用户已选择的文件类别、所属机构、日期等查询条件，以及根据查询条件从后台获取到的文件列表数据等。
* 外部实体：包括URL（用于获取要进入页面时选中的文件类别、所属机构等查询条件）；后端初始化接口；后端查询文件列表接口；用户选择查询类别的操作；用户需要在页面上看到的内容，包括文件列表，已选择的查询条件列表。

然后用数据流将数据流图中各个节点联系起来，用于表示数据的流向，包括以下数据流：
* 进入页面时处理后台返回的初始化数据的相关数据流。
* 从外部实体进入到系统中的数据流，比如来自URL的查询条件。
* 用户选择查询条件时产生的数据流。
* 系统内部将用户选择的查询条件汇总成最终的查询报文的数据流。
* 查询后台文件列表接口并处理返回的文件列表报文的数据流。

最后在系统设计阶段，根据系统分析阶段绘制的数据流图设计总体架构，划分模块，并根据模块分配任务给团队成员。

在后来的系统维护阶段，客户提出了新需求：文件列表需要处理100000个以上的文件，且本人发现按照现有的逻辑会导致浏览器因为内存使用量过大而崩溃。在分析了当前系统的实现方式后，本人在数据流图中添加了以下节点，用来表示浏览器端文件列表局部显示的相关逻辑：
* 新的外部实体：用来表示用户的滚动操作
* 新的数据存储节点：用来存储文件列表界面的滚动位置、视口高度、当前文件列表加载到了第几页等信息
* 新的数据处理节点：用来根据文件列表界面的滚动位置、视口高度等信息，计算要显示文件列表中哪几行，从而避免浏览器端文件列表界面因为显示过多的文件而崩溃。
然后用数据流将新节点联系起来，并与数据流中原来的处理后台接口返回的文件列表的逻辑相联系。最后根据更新后的数据流图快速地完成了相应的开发工作。

通过绘制数据流图，本人成功地使得系统复杂的联动处理逻辑和数据处理流程变得清晰易懂，为系统设计阶段的工作打下了良好的基础，达到了以下效果：
* 系统架构层次分明，易于理解，健壮性好，降低了出现质量问题的风险。
* 加快了开发速度，减小了工期延误的风险。
* 增强了系统的可变性、可维护性、为未来的升级留下了充足的空间。
